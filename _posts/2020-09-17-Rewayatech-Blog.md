---
layout: post
title: تحدي رواية-تك لتحليل الروايات العربية  
dir: RTL
category: Arabic
---


في شهر أغسطس الماضي شاركت في تحدي [رواية-تك](https://github.com/aseelad/Rewayatech-Saudi-Stories) ، وهو تحدي من تنظيم [مجموعة بيان](https://bayan.site) يهدف لتحليل أكثر من ١٢٠٠ رواية عربية كُتبت في المنتديات في الفترة مابين ٢٠٠٣ إلى ٢٠١٥، السمة الأبرز لهذه الروايات هو أنها مكتوبة بلهجات عربية مختلفة أغلبها خليجية، الشكل التالي يوضح تمثيل عينة من هذه الروايات وتوزيعها على اللهجات العربية المختلفة.

<div align="center">
  <img src="https://lailamb.github.io/images/1st_post_t_sne_dialects.png">
</div>

أحد مسارات التحليل التي طُرحت من قِبل منظمي المسابقة هو استكشاف شخصيات الروايات وشبكة العلاقات فيما بينهم، في هذه التدوينة سأستعرض الطريقة التي اتبعتها لهذا الهدف. 

في البداية وبعد الاطلاع على النصوص الروائية بشكل عام يُمكن ملاحظة وجود المشاكل التالية في أغلب الروايات:

- طول القصص وكثرة الحوارات الجانبية بين الشخصيات.
- كثرة عدد الشخصيات في الرواية وتداخل العلاقات بينهم.
- تفاوت أهمية وجود الشخصيات في الرواية ففي حين أن بعض الشخصيات مهمة في سياق وأحداث الرواية، هناك الكثير من الشخصيات الجانبية والغير مهمة. 

تحليل الشخصيات يسهّل من فهم شبكة العلاقات المعقدة في كل رواية وفهم القصة بشكل مبسط، الخطوة الأولى من هذا التحليل هو التعرف على شخصيات الرواية (الذكور والإناث)  تمهيداً للعمليات الأخرى.



### ١. التعرف على شخصيات الرواية: 

التعرف على شخصيات الرواية خطوة رئيسية لفهم الرواية وأحداثها، يمكن اعتبار التعرف على الشخصيات جزء من عملية التعرف على الكائنات [Name Entity Recognition](https://en.wikipedia.org/wiki/Named-entity_recognition) في مجال اللغات الطبيعية والتي يتم فيها التعرف على أي كائن في النص سواء أكان اسم شخص أو مكان أو غيره. هذه العملية في اللغة العربية أصعب من اللغة الإنجليزية والتي يمكن بسهولة تمييز الكائنات فيها عن طريق الأحرف الكبيرة Capital Letters.

لاستخراج الأسماء اتبعت ٣ طرق:

##### ١.  Named Entity Recognizer:

استخراج الأسماء من نص الرواية بواسطة Farasa Named Entity Recognizer كانت المعالجة تأخذ وقتاً طويلاً نظراً لكبر حجم النصوص لهذا تم تجربة هذه الخطوة لبعض النصوص، وتجاوزها عند معالجة البيانات بشكل كامل.

##### ٢.  الطريقة الإحصائية:

هذه الطريقة كانت أبسط وأسرع من السابقة، إذ أن أسماء الشخصيات في الرواية تعد من الكلمات الأكثر تكراراً في الرواية وعند استخراج أسماء الذكور والإناث فقط من هذه الكلمات، يمكن استخراج أسماء الشخصيات من الرواية .

##### ٣.  قاموس الأسماء:

بعد الخطوة السابقة يتم البحث بالنتائج في قاموس خاص كخطوة أخيرة للتأكد من النتائج السابقة، وكذلك لتصنيف الأسماء المستخرجة إلى أسماء ذكور وإناث. لإنشاء قاموس الأسماء اُستخرجت الأسماء العربية للذكور والإناث من موقع ويكيبيديا، بعد تحميل الأسماء وتنظيفها أُضيفت بعض الأسماء الشائعة محلياً بشكل يدوي، قاموس الأسماء الناتج متاح على الرابط التالي [Kaggle](https://www.kaggle.com/lailamohammed/arabic-names).

بعد استخراج أسماء الشخصيات من كل رواية حصلت على جدول بيانات يتكون من الأعمدة التالية (عنوان الرواية، أسماء الشخصيات، عدد مرات ذكر كل شخصية في الرواية، عدد الشخصيات في الرواية).



![1st_post_title_name]({{ site.baseurl }}/images/1st_post_title_name.png)

 

استطاعت هذه الطريقة التعرف على أسماء الشخصيات من ١٢٤٢ قصة من أصل ١٢٦٩ قصة، عند معاينة ٢٨ قصة التي لم يستطع استخراج الأسماء منها، وُجد أنها إما تستخدم أسماء أجنبية مثل: (جوليا، كلوديا، إدوارد ... ) أو تستخدم صيغ أخرى للأسماء: (عيّوش، مهاوي، ... )، أو أن القصة تروى على لسان صاحب القصة والشخصيات مبهمة بدون أسماء أو قليلاً ما تذكر بالاسم.



### **٢. عدد الشخصيات في كل رواية:**

بعد استخراج أسماء الشخصيات في الخطوة السابقة يمكن استخراج عدد الشخصيات في كل الروايات، كما هو واضح من الشكل الذي يتخذ شكل التوزيع الطبيعي، متوسط عدد الشخصيات في كل رواية هو ١٠ شخصيات. 

![1st_post_Number_of_characters]({{ site.baseurl }}/images/1st_post_Number_of_characters.png)



###  **٣. الأسماء الشائعة في الرواية:**

يمكن كذلك معرفة أسماء الشخصيات التي كانت سائدة في تلك الفترة، يوضح الشكل التالي الأسماء الأكثر شيوعاً للذكور والإناث، حيث يحتل اسمي فيصل وخالد الأسماء الأكثر انتشاراً بين الذكور. 


<div align="center">
  <img src="https://lailamb.github.io/images/1st_male_names_cloud.png">
</div>

![1st_male_names]({{ site.baseurl }}/images/1st_male_names.png)

 

أما أسماء الإناث الشائعة فيحتل اسمي سارة وريم أكثر الأسماء انتشاراً بين أسماء الإناث


<div align="center">
  <img src="https://lailamb.github.io/images/1st_female_names_cloud.png">
</div>

![1st_female_names]({{ site.baseurl }}/images/1st_female_names.png)

 

### **٤. العلاقة بين طول الرواية وعدد شخصياتها**

يهدف هذا التحليل إلى اختبار ما إذا كان هناك ارتباط بين عدد الشخصيات في الرواية وطول الرواية، إذ يتوقع أحياناً أنه كلما زاد طول الرواية، زاد تعقيد الأحداث فيها وبالتالي زاد عدد الشخصيات. بعد دراسة الارتباط بين المتغيرين (عدد كلمات الرواية وعدد الشخصيات، وجدت أن معامل الارتباط يساوي ٠.٢ مما يعني وجود ارتباط إيجابي ولكنه ضئيل جداً.


<div align="center">
  <img src="https://lailamb.github.io/images/1st_story_length.png">
</div>


### **٥. تحليل العلاقات والتفاعل بين شخصيات الرواية:** 

استخراج أسماء الشخصيات مهم لاستخراج معلومات أولية عن القصة ولكنه لا يكفي لمعرفة أهمية هذه الشخصيات والعلاقات بينهم، لهذا السبب كان لابد من تحليل العلاقات والتفاعل بين هذه الشخصيات. لاستخراج التفاعل بشكل آلي قمت باستخراج كل جملة ذكرت فيها كل شخصية من شخصيات الرواية، وباستخدام هذه الجمل يمكن إنشاء مصفوفة علاقات تحوي أي اسمين من شخصيات الرواية تم ذكرهم في نفس الجملة أو في نطاق من ٥-١٠ كلمات، على سبيل المثال في قصة "رسالة ضائعة في الصحراء"، تمثل الحالة التالية تفاعل بين كل من (أحمد ومحمد)، (أحمد وخالد)،(خالد ويوسف)،(محمد وخالد)،(محمد ويوسف)،(خالد ويوسف):



![1st_text]({{ site.baseurl }}/images/1st_text.png)

 

وجود اسم شخصيتين في نفس الجملة يعني أن هناك تفاعل قد حدث بين الشخصيتين، هذا التفاعل قد يكون لقاء، أو حوار بين الشخصيتين، أو شخصية تتحدث إلى الشخصية الأخرى أو تفكر في الشخصية الأخرى وماإلى ذلك. 

الشكل التالي يوضّح مثال على جدول العلاقات الناتج من إحدى من الروايات (رواية: آحبك يانونا):


 <div align="center">
  <img src="https://lailamb.github.io/images/1st_post_interaction.png">
</div>

يمثل العمود source و target اسمي الشخصيتين التي حصل بينها تفاعل، يمثل weight عدد مرات حدوث تفاعل بين الشخصيتين، و weight_inv مقلوب هذه القيمة ليسهل التعامل معها في العمليات الحسابية لاحقاً.

بعد إنشاء مصفوفة العلاقات أصبح من السهل تمثيل التفاعل بين شخصيات الرواية كمخطط شبكي (Graph)، وكذلك الاستفادة من خصائص المخطط الشبكي في تحليل أهمية الشخصية في الرواية، الشكل التالي يبين تمثيل رواية (آحبك يانونا) بحيث تمثل كل دائرة في هذا المخطط شخصية من شخصيات الرواية، ويمثل لون الدائرة جنس الشخصية (ذكر، أنثى)، ويمثل حجم الدائرة عدد المرات التي ذكرت فيها هذه الشخصية في الرواية، أما الخط الواصل بين دائرتين فهو يمثل وجود تفاعل بين الشخصين، وسمك هذا الخط يمثل مدى هذا التفاعل.

![1st_post_nona]({{ site.baseurl }}/images/1st_post_nona.png)

المخطط الشبكي للعلاقات بين الشخصيات لرواية "آحبك يانونا"

 

يلاحظ من الشكل أنه يمكن فهم الكثير عن الرواية من المخطط الشبكي فقط، فيمكن استنتاج أن بطلا الرواية هما "أفنان" و "ياسر"، لأنهما الشخصيتان الأكثر تكراراً في الرواية والتفاعل بينهما هو الأقوى، يتضح أيضاً أن "بشاير" لها علاقة قوية بـ"أفنان" وعند قراءة الرواية يتضح بأنها صديقتها المقربة، ومن الشكل أيضاً من السهل ملاحظة الشخصيات الأخرى في الرواية وجنسهم وأهميتهم في القصة بشكل مبسط. 



### ٦. تحليل أهمية الشخصيات في الرواية: 



تمثيل العلاقات بين شخصيات الرواية كمخطط شبكي يتيح تحليل أهمية دور كل شخصية في الرواية عن طريق مقاييس **تحليل المركزية** (Centrality Measures)، تنقسم مقاييس تحليل المركزية إلى عدة أنواع، في هذا التحليل سنتناول نوعين منها.

**١- تحليل الشخصية المركزية في الرواية:** يعد هذا التحليل أبسط أنواع تحليل المركزية، **و**الشخصية المركزية في الرواية يُقصد بها الشخصية التي لها علاقة بأكبر عدد من الشخصيات الأخرى المذكورة في الرواية، وبلغة المخطط الشبكي هي الشخصية المتصلة بجميع الشخصيات الأخرى في الرواية أو بأكبر عدد منها. 

الجدول التالي يمثل درجة المركزية لجميع الشخصيات في رواية (آحبك يانونا)، بحيث تمثل القيمة ١ قيمة مركزية كاملة أي أن الشخصية متصلة بجميع الشخصيات الأخرى في الرواية.



| الشخصية | درجة المركزية |
| :-----: | :-----------: |
|  أفنان  |       ١       |
|  ياسر   |       ١       |
|  بشاير  |       ١       |
|  فواز   |       ١       |
|  طارق   |       ١       |
|  أبرار  |      ٠.٩      |
|  خالد   |      ٠.٩      |
|  جوري   |      ٠.٩      |
|  فراس   |      ٠.٩      |
|  محمد   |      ٠.٩      |
|  روان   |      ٠.٩      |
|  فيصل   |      ٠.٩      |



يُلاحظ أن بعض الشخصيات ومع أنها مذكورة بشكل أكبر في القصة مثل "أبرار" هي أقل مركزية من شخصية مثل "طارق"، وذلك لأن تفاعل "أبرار" مع الشخصيات الأخرى في الرواية أقل من تفاعل طارق.

**٢- تحليل الشخصيات البينية (****Betweenness centrality****)**: في لغة المخطط الشبكي العنصر البيني الأفضل هو العنصر الذي يتواجد دائماً في أقصر طريق يصل بين عنصرين آخرين في الشبكة، وبلغة الرواية الشخصية البينية هي الشخصية التي وجودها مهم في شبكة علاقات القصة، ولها علاقة هي الأوثق مع أكثر شخصيات الرواية.

عند تحليل الشخصيات البينية لرواية (آحبك يانونا)، وُجد أن درجة البينية تختلف من شخصية لأخرى



| الشخصية | درجة البينية |
| :-----: | :----------: |
|  أفنان  |     ٠.٠١     |
|  ياسر   |     ٠.٠١     |
|  بشاير  |     ٠.٠١     |
|  فواز   |     ٠.٠١     |
|  طارق   |     ٠.٠١     |
|  فيصل   |    ٠.٠٠٩     |
|  فراس   |    ٠.٠٠٩     |
|  أبرار  |    ٠.٠٠٦     |
|  خالد   |    ٠.٠٠٣     |
|  محمد   |    ٠.٠٠٣     |
|  روان   |    ٠.٠٠١     |
|  جوري   |    ٠.٠٠١     |

هذه التحليلات مهمة لمعرفة الشخصيات المهمة والجانبية في الرواية وهي أكثر دقة من الاعتماد على تكرار الشخصية، إذ يلاحظ أن عدد مرات ذكر الشخصية في الرواية (حجم الدائرة في الشبكة) لايعني بالضرورة مركزيتها في شبكة علاقات القصة.

يمكن إجراء هذه التحليلات على جميع الروايات في الشكل التالي عينة عشوائية من تطبيق نفس هذا التحليل على روايات أخرى، الشكل التالي يمثل المخطط الشبكي للعلاقات بين الشخصيات لروايتي الحديقة السرية، وورود غرقت من دماء الشياطين

![1st_post_secret_garden]({{ site.baseurl }}/images/1st_post_secret_garden.png)

![1st_post_worood]({{ site.baseurl }}/images/1st_post_worood.png)

------

Code: https://github.com/LailaMB/Rewayatech-Saudi-Stories/blob/master/Rewayatech.ipynb

