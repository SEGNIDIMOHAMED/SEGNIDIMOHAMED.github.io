(function (React$1, ReactDOM, d3, topojson) {
  'use strict';

  var React$1__default = 'default' in React$1 ? React$1['default'] : React$1;
  ReactDOM = ReactDOM && ReactDOM.hasOwnProperty('default') ? ReactDOM['default'] : ReactDOM;

  const jsonUrl =
    'https://gist.githubusercontent.com/wenleicao/296b74bc0269758ef1e010e323f0d6e6/raw/b2959163e5412fd22585144eae434adf2bb64c7b/Massachusetts_geo.json';

  const useMassGeo = () => {
    const [data, setData] = React$1.useState(null);
    
    console.log(data);

    React$1.useEffect(() => {
          d3.json(jsonUrl).then(topojsonData => {
            const {ma} = topojsonData.objects;
            setData(topojson.feature(topojsonData, ma));
          //setData(topojsonData );
          });
    }, []);
    
    return data;
  };

  //import {feature} from 'topojson';

  const csvUrl =
    'https://gist.githubusercontent.com/wenleicao/24da06aff2538ba8740e559c7e670257/raw/Massachusetts_crime_geo.csv';

  const useCrimeData = () => {
    const [data, setData] = React$1.useState(null);
     const row = d => {
      d.lat = +d.lat;
      d.lon = +d.lon;
      d.total = +d.total;
      d.crime_rate = +d.crime_rate;
      return d;
      };
     
    console.log(data);

    React$1.useEffect(() => {
          d3.csv(csvUrl, row).then(setData);
       
    }, []);
    
    return data;
  };

  const projection = d3.geoAlbers()
  	.center([0,42.054])
    .rotate([71.727,0])
    .parallels([41,44])
  	.scale(17000);
  const path = d3.geoPath(projection);
  //const path = (topojasonData) => { 
  // const {ma} = topojsonData.objects;
  //geoPath(projection.fitExtent([[20, 20], [940, 480]], ma))};
  const Marks = ({MassGeo, CrimeData,sizeScale, sizeValue, cityname, countyname}) => (
    
    React.createElement( 'g', { className: "marks" },
    MassGeo.features.map(feature=>(

    React.createElement( 'path', { d: path(feature) })
  	)),
      CrimeData.map(d=> {
    const [x,y] = projection([d.lon, d.lat]);
        return React.createElement( 'circle', { cx: x, cy: y, r: sizeScale(sizeValue(d)) },
                 React.createElement( 'title', null, ["City Name: " + cityname(d), "\nCounty Name: " + countyname(d) + "\nCrime rate: " + d3.format(",.2%")(sizeValue(d))] )
                 )
  		})
      
    
    )
  );

  const width = 960;
  const height = 500;

  const App = () => {
    const MassGeo = useMassGeo();
    const CrimeData =useCrimeData();

    if (!MassGeo||!CrimeData) {
      return React$1__default.createElement( 'pre', null, "Loading..." );
    }

      const cityname =d => d.City;
    const countyname =d => d.County;
    const sizeValue = d =>d.crime_rate;
  	const maxRadius= 10;
  	const sizeScale = d3.scaleSqrt()
  	.domain([0, d3.max(CrimeData, sizeValue)])
  	.range([0, maxRadius]);
   
    return (
      React$1__default.createElement( 'svg', { width: width, height: height, , viewBox: "-50 0 1920 1000" },
       
          React$1__default.createElement( Marks, {
            MassGeo: MassGeo, CrimeData: CrimeData, sizeScale: sizeScale, sizeValue: sizeValue, cityname: cityname, countyname: countyname })
       
      )
    );
  };
  const rootElement = document.getElementById('root1');
  ReactDOM.render(React$1__default.createElement( App, null ), rootElement);

}(React, ReactDOM, d3, topojson));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbInVzZU1hc3NHZW8uanMiLCJ1c2VDcmltZURhdGEuanMiLCJNYXJrcy5qcyIsImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganNvbiB9IGZyb20gJ2QzJztcbmltcG9ydCB7ZmVhdHVyZX0gZnJvbSAndG9wb2pzb24nO1xuXG5jb25zdCBqc29uVXJsID1cbiAgJ2h0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20vd2VubGVpY2FvLzI5NmI3NGJjMDI2OTc1OGVmMWUwMTBlMzIzZjBkNmU2L3Jhdy9iMjk1OTE2M2U1NDEyZmQyMjU4NTE0NGVhZTQzNGFkZjJiYjY0YzdiL01hc3NhY2h1c2V0dHNfZ2VvLmpzb24nO1xuXG5leHBvcnQgY29uc3QgdXNlTWFzc0dlbyA9ICgpID0+IHtcbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIFxuICBjb25zb2xlLmxvZyhkYXRhKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBqc29uKGpzb25VcmwpLnRoZW4odG9wb2pzb25EYXRhID0+IHtcbiAgICAgICAgICBjb25zdCB7bWF9ID0gdG9wb2pzb25EYXRhLm9iamVjdHM7XG4gICAgICAgICAgc2V0RGF0YShmZWF0dXJlKHRvcG9qc29uRGF0YSwgbWEpKTtcbiAgICAgICAgLy9zZXREYXRhKHRvcG9qc29uRGF0YSApO1xuICAgICAgICB9KTtcbiAgfSwgW10pO1xuICBcbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5cbiIsImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjc3YgfSBmcm9tICdkMyc7XG4vL2ltcG9ydCB7ZmVhdHVyZX0gZnJvbSAndG9wb2pzb24nO1xuXG5jb25zdCBjc3ZVcmwgPVxuICAnaHR0cHM6Ly9naXN0LmdpdGh1YnVzZXJjb250ZW50LmNvbS93ZW5sZWljYW8vMjRkYTA2YWZmMjUzOGJhODc0MGU1NTljN2U2NzAyNTcvcmF3L01hc3NhY2h1c2V0dHNfY3JpbWVfZ2VvLmNzdic7XG5cbmV4cG9ydCBjb25zdCB1c2VDcmltZURhdGEgPSAoKSA9PiB7XG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgY29uc3Qgcm93ID0gZCA9PiB7XG4gICAgZC5sYXQgPSArZC5sYXQ7XG4gICAgZC5sb24gPSArZC5sb247XG4gICAgZC50b3RhbCA9ICtkLnRvdGFsO1xuICAgIGQuY3JpbWVfcmF0ZSA9ICtkLmNyaW1lX3JhdGU7XG4gICAgcmV0dXJuIGQ7XG4gICAgfTtcbiAgIFxuICBjb25zb2xlLmxvZyhkYXRhKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjc3YoY3N2VXJsLCByb3cpLnRoZW4oc2V0RGF0YSk7XG4gICAgIFxuICB9LCBbXSk7XG4gIFxuICByZXR1cm4gZGF0YTtcbn07XG4iLCJpbXBvcnQgeyBnZW9FcXVhbEVhcnRoLCBnZW9QYXRoLCBnZW9Db25pY0NvbmZvcm1hbCwgZ2VvT3J0aG9ncmFwaGljLGdlb0FsYmVycyB9IGZyb20gJ2QzJztcbmltcG9ydCB7ICBmb3JtYXQgfSBmcm9tICdkMyc7XG5jb25zdCBwcm9qZWN0aW9uID0gZ2VvQWxiZXJzKClcblx0LmNlbnRlcihbMCw0Mi4wNTRdKVxuICAucm90YXRlKFs3MS43MjcsMF0pXG4gIC5wYXJhbGxlbHMoWzQxLDQ0XSlcblx0LnNjYWxlKDE3MDAwKTtcbmNvbnN0IHBhdGggPSBnZW9QYXRoKHByb2plY3Rpb24pO1xuLy9jb25zdCBwYXRoID0gKHRvcG9qYXNvbkRhdGEpID0+IHsgXG4vLyBjb25zdCB7bWF9ID0gdG9wb2pzb25EYXRhLm9iamVjdHM7XG4vL2dlb1BhdGgocHJvamVjdGlvbi5maXRFeHRlbnQoW1syMCwgMjBdLCBbOTQwLCA0ODBdXSwgbWEpKX07XG5leHBvcnQgY29uc3QgTWFya3MgPSAoe01hc3NHZW8sIENyaW1lRGF0YSxzaXplU2NhbGUsIHNpemVWYWx1ZSwgY2l0eW5hbWUsIGNvdW50eW5hbWV9KSA9PiAoXG4gIFxuICA8ZyBjbGFzc05hbWU9XCJtYXJrc1wiPlxuICB7TWFzc0dlby5mZWF0dXJlcy5tYXAoZmVhdHVyZT0+KFxuXG4gIDxwYXRoIGQ9e3BhdGgoZmVhdHVyZSl9IC8+XG5cdCkpfVxuICAgIHtDcmltZURhdGEubWFwKGQ9PiB7XG4gIGNvbnN0IFt4LHldID0gcHJvamVjdGlvbihbZC5sb24sIGQubGF0XSk7XG4gICAgICByZXR1cm4gPGNpcmNsZSBjeCA9e3h9IGN5PSB7eX0gcj0ge3NpemVTY2FsZShzaXplVmFsdWUoZCkpfT5cbiAgICAgICAgICAgICAgIDx0aXRsZT57W1wiQ2l0eSBOYW1lOiBcIiArIGNpdHluYW1lKGQpLCBcIlxcbkNvdW50eSBOYW1lOiBcIiArIGNvdW50eW5hbWUoZCkgKyBcIlxcbkNyaW1lIHJhdGU6IFwiICsgZm9ybWF0KFwiLC4yJVwiKShzaXplVmFsdWUoZCkpXX08L3RpdGxlPlxuICAgICAgICAgICAgICAgPC9jaXJjbGU+XG5cdFx0fSl9XG4gICAgXG4gIFxuICA8L2c+XG4pO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge21heCxzY2FsZVNxcnQgIH0gZnJvbSAnZDMnO1xuaW1wb3J0IHsgdXNlTWFzc0dlbyB9IGZyb20gJy4vdXNlTWFzc0dlbyc7XG5pbXBvcnQgeyB1c2VDcmltZURhdGEgfSBmcm9tICcuL3VzZUNyaW1lRGF0YSc7XG5pbXBvcnQgeyBNYXJrcyB9IGZyb20gJy4vTWFya3MnO1xuXG5jb25zdCB3aWR0aCA9IDk2MDtcbmNvbnN0IGhlaWdodCA9IDUwMDtcblxuY29uc3QgQXBwID0gKCkgPT4ge1xuICBjb25zdCBNYXNzR2VvID0gdXNlTWFzc0dlbygpO1xuICBjb25zdCBDcmltZURhdGEgPXVzZUNyaW1lRGF0YSgpO1xuXG4gIGlmICghTWFzc0dlb3x8IUNyaW1lRGF0YSkge1xuICAgIHJldHVybiA8cHJlPkxvYWRpbmcuLi48L3ByZT47XG4gIH1cblxuICAgIGNvbnN0IGNpdHluYW1lID1kID0+IGQuQ2l0eTtcbiAgY29uc3QgY291bnR5bmFtZSA9ZCA9PiBkLkNvdW50eTtcbiAgY29uc3Qgc2l6ZVZhbHVlID0gZCA9PmQuY3JpbWVfcmF0ZTtcblx0Y29uc3QgbWF4UmFkaXVzPSAxMDtcblx0Y29uc3Qgc2l6ZVNjYWxlID0gc2NhbGVTcXJ0KClcblx0LmRvbWFpbihbMCwgbWF4KENyaW1lRGF0YSwgc2l6ZVZhbHVlKV0pXG5cdC5yYW5nZShbMCwgbWF4UmFkaXVzXSk7XG4gXG4gIHJldHVybiAoXG4gICAgPHN2ZyB3aWR0aD17d2lkdGh9IGhlaWdodD17aGVpZ2h0fT5cbiAgICAgXG4gICAgICAgIDxNYXJrc1xuICAgICAgICAgIE1hc3NHZW89e01hc3NHZW99XG4gICAgICAgICAgQ3JpbWVEYXRhID0ge0NyaW1lRGF0YX1cbiAgICAgICAgICBzaXplU2NhbGUgPSB7c2l6ZVNjYWxlfVxuICAgICAgICAgIHNpemVWYWx1ZSA9IHtzaXplVmFsdWV9XG4gICAgICAgICAgICBjaXR5bmFtZSA9IHtjaXR5bmFtZX1cbiAgICAgICAgICBjb3VudHluYW1lPSB7Y291bnR5bmFtZX1cbiAgICAgICAgLz5cbiAgICAgXG4gICAgPC9zdmc+XG4gICk7XG59O1xuY29uc3Qgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuUmVhY3RET00ucmVuZGVyKDxBcHAgLz4sIHJvb3RFbGVtZW50KTtcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImpzb24iLCJmZWF0dXJlIiwiY3N2IiwiZ2VvQWxiZXJzIiwiZ2VvUGF0aCIsImZvcm1hdCIsIlJlYWN0Iiwic2NhbGVTcXJ0IiwibWF4Il0sIm1hcHBpbmdz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
